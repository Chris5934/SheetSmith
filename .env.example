# SheetSmith Configuration

# Google Sheets API credentials
# Download from Google Cloud Console: https://console.cloud.google.com/
GOOGLE_CREDENTIALS_PATH=credentials.json
GOOGLE_TOKEN_PATH=token.json

# LLM Provider Configuration
# Choose between 'anthropic' or 'openrouter'
LLM_PROVIDER=anthropic

# Anthropic API Configuration
# Required when LLM_PROVIDER=anthropic
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-api-key-here
# Model to use with Anthropic (only used when LLM_PROVIDER=anthropic)
MODEL_NAME=claude-sonnet-4-20250514

# OpenRouter API Configuration
# Required when LLM_PROVIDER=openrouter
# Get from: https://openrouter.ai/
OPENROUTER_API_KEY=your-openrouter-key-here
# Model to use with OpenRouter (only used when LLM_PROVIDER=openrouter)
# Examples: anthropic/claude-3.5-sonnet, openai/gpt-4, etc.
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet

# Database path for persistence
DATABASE_PATH=data/sheetsmith.db

# Server settings
HOST=127.0.0.1
PORT=8000
DEBUG=false

# CORS settings (comma-separated list of allowed origins, or * for all)
CORS_ALLOW_ORIGINS=*

# Agent settings
MAX_TOKENS=4096

# Cost Reduction Settings
# Enable JSON-only mode (no tool schemas sent to LLM)
USE_JSON_MODE=true

# Use free models when available (adds :free suffix to OpenRouter models)
USE_FREE_MODELS=false

# Model selection by operation type (for cost optimization)
PARSER_MODEL=anthropic/claude-3-haiku
AI_ASSIST_MODEL=anthropic/claude-3-haiku
# Leave PLANNING_MODEL empty to use main model

# Token limits by operation type
PARSER_MAX_TOKENS=300
AI_ASSIST_MAX_TOKENS=400
PLANNING_MAX_TOKENS=800

# Hard caps for payload size
PROMPT_MAX_CHARS=10000
SPREADSHEET_CONTENT_MAX_CHARS=5000
FORMULA_SAMPLE_LIMIT=5

# Cost Tracking and Budget Limits
ENABLE_COST_LOGGING=true
COST_LOG_PATH=logs/llm_costs.jsonl
PAYLOAD_MAX_CHARS=50000
MAX_INPUT_TOKENS=100000
PER_REQUEST_BUDGET_CENTS=5.0
SESSION_BUDGET_CENTS=50.0
ALERT_ON_HIGH_COST=true
HIGH_COST_THRESHOLD_CENTS=1.0

# Diagnostics and Monitoring
ENABLE_COST_SPIKE_DETECTION=true
MAX_SYSTEM_PROMPT_CHARS=5000
MAX_HISTORY_MESSAGES=10
MAX_SHEET_CONTENT_CHARS=5000
MAX_TOOLS_SCHEMA_BYTES=50000
COST_SPIKE_THRESHOLD_MULTIPLIER=3.0

# Safety Constraints
MAX_CELLS_PER_OPERATION=500
MAX_SHEETS_PER_OPERATION=40
MAX_FORMULA_LENGTH=50000
REQUIRE_PREVIEW_ABOVE_CELLS=10

# Cost Optimization - use cheaper model for planning (leave empty to use main model)
PLANNING_MODEL=
